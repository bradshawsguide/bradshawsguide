<!doctype html>
<html lang="en">
<head>
  <title>Geolocation demo</title>
  <meta charset="utf-8" />
</head>

<body>
  <p><button onclick="GetMap()">Show map</button></p>

  <script type="text/javascript">
    function GetMap() {
      // Check if browser supports geolocation
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(locationSuccess, locationFail);
      }
      else {
        alert('Geolocation is not supported by your current browser.');
      }
    }

    function locationSuccess(position) {
      latitude = position.coords.latitude.toFixed(4);
      longitude = position.coords.longitude.toFixed(4);

      window.location.href = '/search?g='+latitude+','+longitude;
    }

    function locationFail() {
      alert('Could not locate you.');
    }
  </script>
</body>
</html>
